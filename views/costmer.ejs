<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>costmer</title>
</head>

<body>
    <h1>costmer</h1>
    <!-- movie: obj1, theater: obj2, seat: obj4, alert: '', name: user_email, ticket: obj3 -->
    <samll style="color: white;">
        <%=alert%>
            <%=movie%>
                <%=theater%>
                    <%=seat%>

    </samll>
    <small id="s1" style="color: green;"></small>
    <small id="e1" style="color: red;"></small>
    <br>
    <form method="post" action="/costmer">
        <p>welome mr.<%=name.uname%>
        </p>
        <label for="t_id">theaterid:</label>
        <select id="t_id" name="t_id">
            <option value=""> </option>
        </select>
        <small id="t1" style="color: red;"></small>
        <br><br>
        <label for="m_id">movieid: </label>
        <select id="m_id" name="m_id">
            <option value=""> </option>
        </select>
        <small id="m1" style="color: red;"></small>
        <br><br>
        <label for="m_name">movieName:</label>
        <select id="m_name" name="m_name">
            <option value=""> </option>
        </select>
        <small id="mn1" style="color: red;"></small>
        <br><br>
        <label for="m_lang">language:</label>
        <select id="m_lang" name="m_lang">
            <option value=""> </option>
        </select>
        <small id="ml1" style="color: red;"></small><br>
        <br>
        <label>show_type:</label>
        <select id="show" name="show">
            <option value=""></option>
            <option value="morning">morning</option>
            <option value="afternoon">afternoon </option>
            <option value="firstshow">firstshow </option>
            <option value="secondshow">secondshow </option>
        </select>
        <br>
        <br>
        <h5> select either upperclass or lowerclass</h5>

        <label for="seatno">upperclass:</label>
        <select id="seatupno" name="seatupno">
            <option value=""> </option>
        </select>
        <small id="eup1" style="color: red;"></small><br>
        <br>
        <p>or</p>
        <label for="seatno">lowerclass:</label>
        <select id="seatlowno" name="seatlowno">
            <option value=""> </option>
        </select>
        <small id="elow1" style="color: red;"></small>
        <br> <br>
        <button type="submit" value="<%= name.uname %>" name="name">submit</button>
    </form>
    <p>click submit button to proceed</p>
</body>

<script>
    var movi = '<%-JSON.stringify(movie)%>';
    var movie = JSON.parse(movi);

    var theater = '<%-JSON.stringify(theater)%>';
    var theater1 = JSON.parse(theater);

    var seat = '<%-JSON.stringify(seat)%>';
    var seats = JSON.parse(seat);
    // select ids
    var t_id = document.getElementById('t_id');
    var m_id = document.getElementById('m_id');
    var m_name = document.getElementById('m_name');
    var m_lang = document.getElementById('m_lang');
    var seatupno = document.getElementById('seatupno');
    var seatlowno = document.getElementById('seatlowno');

    for (var i = 0; i < movie.length; i++) {
        var opt = document.createElement('option');
        opt.innerHTML = movie[i].movieid;
        opt.value = movie[i].movieid;
        m_id.appendChild(opt);
        var opt1 = document.createElement('option');
        opt1.innerHTML = movie[i].moviename;
        opt1.value = movie[i].moviename;
        m_name.appendChild(opt1);
        var opt2 = document.createElement('option');
        opt2.innerHTML = movie[i].language;
        opt2.value = movie[i].language;
        m_lang.appendChild(opt2);
    }

    for (var i = 0; i < theater1.length; i++) {
        var opt = document.createElement('option');
        opt.innerHTML = theater1[i].theaterid;
        opt.value = theater1[i].theaterid;
        t_id.appendChild(opt);
    }
    for (var i = 0; i < seats.length; i++) {
        var opt5 = document.createElement('option');
        opt5.innerHTML = seats[i].upperclass;
        opt5.value = seats[i].upperclass;
        seatupno.appendChild(opt5);

        var opt6 = document.createElement('option');
        opt6.innerHTML = seats[i].upperclass;
        opt6.value = seats[i].upperclass;
        seatlowno.appendChild(opt6);
    }

    var alert1 = '<%-alert%>'
    if (alert1 == 'uplow') {
        document.getElementById('e1').innerHTML = "select either upperclass or lowercalss"
    } else if (alert1 == 'e1') {
        document.getElementById('eup1').innerHTML = "seatno already seleted"
    } else if (alert1 == 'e2') {
        document.getElementById('elow1').innerHTML = "seatno already seleted"
    } else if (alert1 == 'uplow_er') {
        document.getElementById('e1').innerHTML = "can not select both "
    } else if (alert1 == 't1id') {
        document.getElementById('t1').innerHTML = "select theaterid"
    } else if (alert1 == 'm1id') {
        document.getElementById('m1').innerHTML = "select movieid"
    } else if (alert1 == 'mn1') {
        document.getElementById('mn1').innerHTML = "select moviename"
    } else if (alert1 == 'lang1') {
        document.getElementById('ml1').innerHTML = "select language"
    } else if (alert1 == 'show') {
        document.getElementById('ml1').innerHTML = "select show_type"
    }

</script>

</html>